<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D&D Adventure Game - Pixel Fixed</title>
    <style>
        body {
            font-family: Arial, Helvetica, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #1a1a2e;          /* Lighter dark blue-gray – visible now */
            color: #e0e0ff;
            min-height: 100vh;
            text-align: center;
        }
        #game-container {
            max-width: 900px;
            margin: 0 auto;
        }
        h1, h2, h3 {
            color: #ffd700;
        }
        button {
            background: #4a148c;
            color: white;
            border: 2px solid #7e57c2;
            padding: 10px 20px;
            margin: 8px;
            font-size: 16px;
            cursor: pointer;
            border-radius: 6px;
        }
        button:hover {
            background: #7e57c2;
        }
        select, input {
            padding: 8px;
            margin: 8px;
            font-size: 16px;
            background: #0f081a;
            color: white;
            border: 1px solid #7e57c2;
            border-radius: 4px;
        }
        #character-creation, #game-screen, #death-screen, #shop-screen {
            display: none;
        }
        .combat-area {
            display: flex;
            justify-content: space-between;
            margin: 40px 0;
            position: relative;
            min-height: 280px;
        }
        .character-side, .enemy-side {
            width: 220px;
            text-align: center;
        }
        .model {
            width: 140px;
            height: 140px;
            margin: 0 auto 10px;
            background-size: contain;
            background-position: center;
            background-repeat: no-repeat;
            border: 3px solid #7e57c2;
            border-radius: 12px;
            background-color: #2a2a4a; /* fallback color if image fails */
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            color: #aaa;
        }
        .health-bar {
            width: 160px;
            height: 22px;
            background: #333;
            border: 2px solid #555;
            margin: 10px auto;
            border-radius: 6px;
            overflow: hidden;
            position: relative;
        }
        .health-fill {
            height: 100%;
            background: linear-gradient(to right, #00cc44, #88ff88);
            transition: width 0.4s ease;
        }
        .health-text {
            position: absolute;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 13px;
            text-shadow: 1px 1px 2px black;
        }
        #story-text {
            font-size: 18px;
            line-height: 1.5;
            margin: 20px 0;
            padding: 15px;
            background: rgba(0,0,0,0.5);
            border-radius: 8px;
            min-height: 80px;
        }
        #dice-result {
            font-size: 20px;
            font-weight: bold;
            margin: 15px 0;
            min-height: 30px;
            color: #ffeb3b;
        }
        #death-screen {
            position: fixed;
            inset: 0;
            background: black;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 36px;
            color: #ff4444;
        }
        .hidden { display: none !important; }
    </style>
</head>
<body>

<div id="game-container">

    <!-- CHARACTER CREATION -->
    <div id="character-creation">
        <h1>Create Your Hero</h1>
        
        <label>Race:</label><br>
        <select id="race">
            <option value="Human">Human</option>
            <option value="Elf">Elf</option>
            <option value="Dwarf">Dwarf</option>
            <option value="Orc">Orc</option>
        </select><br><br>

        <label>Class:</label><br>
        <select id="class">
            <option value="Fighter">Fighter</option>
            <option value="Wizard">Wizard</option>
            <option value="Rogue">Rogue</option>
            <option value="Cleric">Cleric</option>
        </select><br><br>

        <label>Weapons (comma separated):</label><br>
        <input type="text" id="weapons" value="Shortsword" placeholder="Shortsword, Bow"><br><br>

        <label>Armor:</label><br>
        <input type="text" id="armor" value="Leather Armor"><br><br>

        <button onclick="startGame()">Begin Adventure</button>
    </div>

    <!-- MAIN GAME SCREEN -->
    <div id="game-screen">
        <h1>D&D Pixel Adventure</h1>

        <div class="combat-area">
            <div class="character-side">
                <div id="player-model" class="model">Your Hero</div>
                <div class="health-bar">
                    <div id="player-health-fill" class="health-fill" style="width:100%"></div>
                    <div id="player-health-text" class="health-text">HP: 20 / 20</div>
                </div>
                <h3 id="player-name">Your Hero</h3>
            </div>

            <div class="enemy-side">
                <div id="enemy-model" class="model">Enemy</div>
                <div id="enemy-health-container" class="health-bar hidden">
                    <div id="enemy-health-fill" class="health-fill" style="width:100%"></div>
                    <div id="enemy-health-text" class="health-text">Enemy HP</div>
                </div>
                <h3 id="enemy-name">—</h3>
            </div>
        </div>

        <div id="story-text">Loading your adventure...</div>

        <div id="dice-result"></div>

        <div id="choices"></div>

        <div id="dice-roller" class="hidden">
            <h3>Attack Roll (d20)</h3>
            <button onclick="playerAttack()">Roll d20</button>
        </div>

        <div id="shop-screen" class="hidden">
            <h2>Merchant / Tavern</h2>
            <p id="shop-text">Welcome! What do you want?</p>
            <div id="shop-buttons"></div>
            <button onclick="exitShop()">Leave</button>
        </div>
    </div>

    <!-- DEATH SCREEN -->
    <div id="death-screen" class="hidden">
        <div>
            <p>You have fallen...</p>
            <p style="font-size: 28px; margin: 30px 0;">RISE UP</p>
            <button onclick="location.reload()">New Adventure</button>
        </div>
    </div>

</div>

<script>
// Game State
let player = {
    race: "",
    class: "",
    hp: 20,
    maxHp: 20,
    weapons: [],
    armor: "",
    gold: 0
};

let enemy = {
    name: "",
    hp: 0,
    maxHp: 0
};

let inCombat = false;
let playerTurn = true;

// Pixel art images (small/free assets – front facing/portrait style)
const playerImages = {
    Human:  "https://img.craftpix.net/2025/01/Anime-Warrior-Man-Character-Pixel-Sprite-Pack.gif",
    Elf:    "https://img.craftpix.net/2021/10/Elf-Portrait-Icons-Pixel-Art-720x480.webp
