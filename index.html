<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Test - Legion Squad Visible</title>
<style>
    body { margin:0; padding:0; background:#000; overflow:hidden; }
    #ui { position:absolute; top:10px; left:10px; background:rgba(0,0,0,0.7); padding:15px; border:1px solid #fff; z-index:10; }
    #canvas { display:block; }
    button, select { margin:5px; padding:8px; font-size:16px; }
</style>
</head>
<body>

<div id="ui">
    <label>Choose Legion:</label><br>
    <select id="legionSelect">
        <option value="">Pick one</option>
        <option value="Dark Angels">Dark Angels</option>
        <option value="Ultramarines">Ultramarines</option>
        <option value="Space Wolves">Space Wolves</option>
        <!-- add more if you want -->
    </select><br>
    <button onclick="startGame()">Deploy</button>
</div>

<canvas id="canvas" width="1400" height="900"></canvas>

<script>
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');

let squad = [];

function startGame() {
    const legion = document.getElementById('legionSelect').value;
    if (!legion) {
        alert("Pick a legion first!");
        return;
    }

    // Hide UI
    document.getElementById('ui').style.display = 'none';

    // Create squad in center of screen
    squad = [];
    for (let i = 0; i < 11; i++) {
        squad.push({
            x: 700 + (i - 5) * 30,
            y: 450 + (i % 3 - 1) * 30,
            color: legion === "Ultramarines" ? "#1976d2" : legion === "Space Wolves" ? "#90caf9" : "#2e7d32"
        });
    }

    // Draw once right now
    draw();
}

function draw() {
    ctx.fillStyle = '#2e4d1a'; // dark green ground
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    // Debug text
    ctx.fillStyle = 'white';
    ctx.font = '24px Arial';
    ctx.fillText("Squad should be visible here", 500, 100);

    // Draw squad circles
    squad.forEach((marine, i) => {
        ctx.fillStyle = marine.color;
        ctx.beginPath();
        ctx.arc(marine.x, marine.y, i === 5 ? 18 : 12, 0, Math.PI * 2);
        ctx.fill();

        // White helmet
        ctx.fillStyle = 'white';
        ctx.beginPath();
        ctx.arc(marine.x, marine.y - 8, 8, 0, Math.PI * 2);
        ctx.fill();
    });
}

// Redraw every frame (even if nothing moves yet)
function loop() {
    draw();
    requestAnimationFrame(loop);
}
loop();
</script>
</body>
</html>
