<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D&D Adventure Game</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            color: white;
            text-align: center;
            background-color: black;
            transition: background-image 1s ease-in-out;
        }
        #game-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        #character-creation, #game-screen, #death-screen {
            display: none;
        }
        #death-screen {
            background-color: black;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            animation: fadeIn 2s;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        button {
            margin: 10px;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
        }
        #story-text {
            margin: 20px 0;
            font-size: 18px;
        }
        #character-model, #enemy-model {
            width: 200px;
            height: 200px;
            margin: 20px auto;
            background-size: cover;
            background-repeat: no-repeat;
        }
        #dice-select {
            margin: 10px;
        }
        /* Background classes */
        .forest-bg { background-image: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik0wIDBoMjAwdjIwMEgweiIgZmlsbD0iIzAwODA0MCIvPjwvc3ZnPg=='); } /* Green forest */
        .dungeon-bg { background-image: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik0wIDBoMjAwdjIwMEgweiIgZmlsbD0iIzQwNDA0MCIvPjwvc3ZnPg=='); } /* Gray dungeon */
        .mountain-bg { background-image: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik0wIDBoMjAwdjIwMEgweiIgZmlsbD0iIzgwODA4MCIvPjwvc3ZnPg=='); } /* Brown mountain */
        /* Add more backgrounds as needed */
    </style>
</head>
<body id="game-body">
    <div id="game-container">
        <!-- Character Creation Menu -->
        <div id="character-creation">
            <h1>Create Your Character</h1>
            <label for="race">Race/Species:</label>
            <select id="race">
                <option value="Human">Human</option>
                <option value="Elf">Elf</option>
                <option value="Dwarf">Dwarf</option>
                <option value="Orc">Orc</option>
                <option value="Halfling">Halfling</option>
                <option value="Tiefling">Tiefling</option>
                <option value="Dragonborn">Dragonborn</option>
            </select><br><br>
            
            <label for="class">Class:</label>
            <select id="class">
                <option value="Fighter">Fighter</option>
                <option value="Wizard">Wizard</option>
                <option value="Rogue">Rogue</option>
                <option value="Cleric">Cleric</option>
                <option value="Barbarian">Barbarian</option>
            </select><br><br>
            
            <label for="level">Starting Level:</label>
            <input type="number" id="level" value="1" min="1"><br><br>
            
            <label for="weapons">Weapons (comma-separated):</label>
            <input type="text" id="weapons" placeholder="e.g., Sword, Bow"><br><br>
            
            <label for="armor">Armor:</label>
            <input type="text" id="armor" placeholder="e.g., Leather Armor"><br><br>
            
            <label for="spells">Spells (comma-separated, if applicable):</label>
            <input type="text" id="spells" placeholder="e.g., Fireball, Heal"><br><br>
            
            <label for="inventory">Inventory (comma-separated):</label>
            <input type="text" id="inventory" placeholder="e.g., Potion, Gold"><br><br>
            
            <button onclick="startGame()">Start Adventure</button>
        </div>
        
        <!-- Game Screen -->
        <div id="game-screen">
            <h1>Your Adventure</h1>
            <div id="character-info">
                <h2>Character Stats</h2>
                <p id="char-race"></p>
                <p id="char-class"></p>
                <p id="char-level"></p>
                <p id="char-hp">HP: 20/20</p> <!-- Starting HP, adjustable -->
                <p id="char-weapons"></p>
                <p id="char-armor"></p>
                <p id="char-spells"></p>
                <p id="char-inventory"></p>
            </div>
            <div id="character-model"></div>
            <div id="story-text"></div>
            <div id="enemy-model"></div>
            <div id="choices"></div>
            <div id="dice-roller" style="display:none;">
                <h3>Roll Dice for Attack</h3>
                <select id="dice-select">
                    <option value="20">d20 (Standard Attack)</option>
                    <!-- Add more dice if needed -->
                </select>
                <button onclick="rollDice()">Roll</button>
                <p id="dice-result"></p>
            </div>
        </div>
        
        <!-- Death Screen -->
        <div id="death-screen" style="display:none;">
            You and your fellow warriors have fallen, Rise up
            <button onclick="restartGame()">Restart</button>
        </div>
    </div>

    <script>
        let character = {};
        let currentHP = 20;
        let maxHP = 20;
        let storyState = 'start';
        const backgrounds = {
            forest: 'forest-bg',
            dungeon: 'dungeon-bg',
            mountain: 'mountain-bg'
            // Add more as needed
        };
        const models = {
            Human: 'url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxjaXJjbGUgY3g9IjEwMCIgY3k9IjUwIiByPSI0MCIgZmlsbD0iI2ZmZDA4MCIvPjxwYXRoIGQ9Ik05MCAxMDBoMjB2NTBoLTUwdjUwaC0yMHoiIGZpbGw9IiMwMDAiLz48L3N2Zz4=)', // Simple human stick figure
            Elf: 'url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxjaXJjbGUgY3g9IjEwMCIgY3k9IjUwIiByPSI0MCIgZmlsbD0iI2ZmZDA4MCIvPjxwYXRoIGQ9Ik05MCAxMDBoMjB2NTBoLTUwdjUwaC0yMHoiIGZpbGw9IiMwMDAiLz48cG9seWdvbiBwb2ludHM9IjEwMCwzMCAxMTAsMjAgOTAsMjAiIGZpbGw9IiMwMDAiLz48L3N2Zz4=)', // With ears
            // Add simple SVG models for others
            Dwarf: 'url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxjaXJjbGUgY3g9IjEwMCIgY3k9IjUwIiByPSI0MCIgZmlsbD0iI2ZmZDA4MCIvPjxwYXRoIGQ9Ik05MCAxMDBoMjB2NTBoLTUwdjUwaC0yMHoiIGZpbGw9IiMwMDAiLz48cmVjdCB4PSI4MCIgeT0iNTAiIHdpZHRoPSI0MCIgaGVpZ2h0PSIyMCIgZmlsbD0iI2ZmMDAwMCIvPjwvc3ZnPg==)', // With beard
            Orc: 'url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxjaXJjbGUgY3g9IjEwMCIgY3k9IjUwIiByPSI0MCIgZmlsbD0iIzAwODA0MCIvPjxwYXRoIGQ9Ik05MCAxMDBoMjB2NTBoLTUwdjUwaC0yMHoiIGZpbGw9IiMwMDAiLz48L3N2Zz4=)',
            Halfling: 'url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxjaXJjbGUgY3g9IjEwMCIgY3k9IjUwIiByPSIzMCIgZmlsbD0iI2ZmZDA4MCIvPjxwYXRoIGQ9Ik05MCAxMDBoMjB2NDBoLTQwdjQwaC0yMHoiIGZpbGw9IiMwMDAiLz48L3N2Zz4=)',
            Tiefling: 'url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxjaXJjbGUgY3g9IjEwMCIgY3k9IjUwIiByPSI0MCIgZmlsbD0iI2ZmMDAwMCIvPjxwYXRoIGQ9Ik05MCAxMDBoMjB2NTBoLTUwdjUwaC0yMHoiIGZpbGw9IiMwMDAiLz48cG9seWdvbiBwb2ludHM9IjEwMCwzMCAxMTAsMjAgOTAsMjAiIGZpbGw9IiMwMDAiLz48L3N2Zz4=)',
            Dragonborn: 'url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxjaXJjbGUgY3g9IjEwMCIgY3k9IjUwIiByPSI0MCIgZmlsbD0iIzAwMDBmZiIvPjxwYXRoIGQ9Ik05MCAxMDBoMjB2NTBoLTUwdjUwaC0yMHoiIGZpbGw9IiMwMDAiLz48L3N2Zz4=)'
        };
        const enemyModels = {
            goblin: 'url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxjaXJjbGUgY3g9IjEwMCIgY3k9IjUwIiByPSIzMCIgZmlsbD0iIzAwODA0MCIvPjxwYXRoIGQ9Ik05MCAxMDBoMjB2NDBoLTQwdjQwaC0yMHoiIGZpbGw9IiMwMDAiLz48L3N2Zz4=)',
            dragon: 'url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxjaXJjbGUgY3g9IjEwMCIgY3k9IjUwIiByPSI1MCIgZmlsbD0iI2ZmMDAwMCIvPjxwYXRoIGQ9Ik05MCAxMDBoMjB2NjBoLTYwdjYwaC0yMHoiIGZpbGw9IiMwMDAiLz48L3N2Zz4=)'
            // Add more
        };

        // Start with character creation visible
        document.getElementById('character-creation').style.display = 'block';

        function startGame() {
            character.race = document.getElementById('race').value;
            character.class = document.getElementById('class').value;
            character.level = document.getElementById('level').value;
            character.weapons = document.getElementById('weapons').value.split(',').map(w => w.trim());
            character.armor = document.getElementById('armor').value;
            character.spells = document.getElementById('spells').value.split(',').map(s => s.trim());
            character.inventory = document.getElementById('inventory').value.split(',').map(i => i.trim());

            // Set max HP based on level/class (simple formula)
            maxHP = 10 + (parseInt(character.level) * 5) + (character.class === 'Fighter' ? 10 : 0);
            currentHP = maxHP;

            document.getElementById('char-race').textContent = 'Race: ' + character.race;
            document.getElementById('char-class').textContent = 'Class: ' + character.class;
            document.getElementById('char-level').textContent = 'Level: ' + character.level;
            document.getElementById('char-hp').textContent = 'HP: ' + currentHP + '/' + maxHP;
            document.getElementById('char-weapons').textContent = 'Weapons: ' + character.weapons.join(', ');
            document.getElementById('char-armor').textContent = 'Armor: ' + character.armor;
            document.getElementById('char-spells').textContent = 'Spells: ' + character.spells.join(', ');
            document.getElementById('char-inventory').textContent = 'Inventory: ' + character.inventory.join(', ');

            document.getElementById('character-model').style.backgroundImage = models[character.race] || 'url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxjaXJjbGUgY3g9IjEwMCIgY3k9IjUwIiByPSI0MCIgZmlsbD0iI2ZmZDA4MCIvPjxwYXRoIGQ9Ik05MCAxMDBoMjB2NTBoLTUwdjUwaC0yMHoiIGZpbGw9IiMwMDAiLz48L3N2Zz4=)';

            document.getElementById('character-creation').style.display = 'none';
            document.getElementById('game-screen').style.display = 'block';

            generateStory();
        }

        function generateStory() {
            // Simple random story generator - new each time
            const locations = ['forest', 'dungeon', 'mountain'];
            const randomLocation = locations[Math.floor(Math.random() * locations.length)];
            setBackground(randomLocation);

            const stories = [
                `You enter a mysterious ${randomLocation}. A goblin appears!`,
                `In the depths of the ${randomLocation}, you face a dragon boss!`,
                `Exploring the ${randomLocation}, you find a treasure but it's guarded.`
            ];
            const randomStory = stories[Math.floor(Math.random() * stories.length)];
            document.getElementById('story-text').textContent = randomStory;

            // Set enemy model based on story
            let enemy = randomStory.includes('goblin') ? 'goblin' : 'dragon';
            document.getElementById('enemy-model').style.backgroundImage = enemyModels[enemy] || '';

            // Show dice for combat
            document.getElementById('dice-roller').style.display = 'block';

            // Simple choices
            const choicesDiv = document.getElementById('choices');
            choicesDiv.innerHTML = '';
            const choiceBtn1 = document.createElement('button');
            choiceBtn1.textContent = 'Fight';
            choiceBtn1.onclick = () => { /* Already handled by dice */ };
            choicesDiv.appendChild(choiceBtn1);

            const choiceBtn2 = document.createElement('button');
            choiceBtn2.textContent = 'Run';
            choiceBtn2.onclick = () => {
                document.getElementById('story-text').textContent = 'You run away safely.';
                setTimeout(generateStory, 2000); // New mission
            };
            choicesDiv.appendChild(choiceBtn2);
        }

        function setBackground(location) {
            document.getElementById('game-body').className = backgrounds[location] || '';
        }

        function rollDice() {
            const dice = parseInt(document.getElementById('dice-select').value);
            const roll = Math.floor(Math.random() * dice) + 1;
            let result = '';
            if (roll <= 9) {
                result = 'Miss! (' + roll + ')';
                takeDamage(5); // Enemy hits back
            } else if (roll >= 10 && roll <= 19) {
                result = 'Hit! (' + roll + ')';
                // Enemy takes damage, but simple: proceed
            } else if (roll === 20) {
                result = 'Critical Hit! (' + roll + ')';
                // Instant win combat
                document.getElementById('story-text').textContent += ' You defeat the enemy!';
                setTimeout(generateStory, 2000); // Next story
                return;
            }
            document.getElementById('dice-result').textContent = result;

            if (roll >= 10) {
                document.getElementById('story-text').textContent += ' You hit the enemy!';
                setTimeout(generateStory, 2000); // Next
            }
        }

        function takeDamage(amount) {
            currentHP -= amount;
            document.getElementById('char-hp').textContent = 'HP: ' + currentHP + '/' + maxHP;
            if (currentHP <= 0) {
                die();
            }
        }

        function die() {
            document.getElementById('game-screen').style.display = 'none';
            document.getElementById('death-screen').style.display = 'flex';
        }

        function restartGame() {
            // Reset everything
            character = {};
            currentHP = 20;
            maxHP = 20;
            storyState = 'start';
            document.getElementById('death-screen').style.display = 'none';
            document.getElementById('character-creation').style.display = 'block';
            document.getElementById('game-body').className = '';
            // Items and damage reset automatically on new character
        }
    </script>
</body>
</html>
