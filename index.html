<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Shift Horror - 10 Nights</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<style>
  body, html { margin:0; padding:0; overflow:hidden; background:#000; font-family:'Courier New', monospace; color:#0f0; }
  canvas { display:block; }
  #ui {
    position:absolute; inset:0; pointer-events:none; color:#0f0; text-shadow:0 0 6px #0f0; font-size:1.4rem; padding:20px; z-index:10;
  }
  #phone {
    position:absolute; bottom:40px; left:50%; transform:translateX(-50%);
    width:360px; height:720px; background:#0a0a0a; border:6px solid #222; border-radius:36px;
    padding:30px; box-shadow:0 0 60px #000; display:none; pointer-events:all; overflow-y:auto; font-size:1.2rem; line-height:1.6; z-index:20;
  }
  #phone.show { display:block; }
  #time { position:absolute; top:20px; right:30px; font-size:3rem; text-shadow:0 0 12px #0f0; }
  #hud { position:absolute; bottom:20px; left:50%; transform:translateX(-50%); font-size:2rem; }
  #shift-message {
    position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
    font-size:5rem; text-align:center; color:#f00; text-shadow:0 0 20px #f00; display:none;
  }
  #end-shift {
    position:absolute; inset:0; background:rgba(0,0,0,0.95); color:#f00; font-size:6rem; text-align:center; padding-top:40vh; display:none;
  }
</style>
</head>
<body>

<div id="ui">
  <div id="time">04:00</div>
  <div id="hud"></div>
</div>

<div id="phone">
  <h2>Phone</h2>
  <div id="mission-text"></div>
</div>

<div id="shift-message"></div>
<div id="end-shift">YOUR SHIFT IS OVER<br>GO HOME</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.168.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.168.0/examples/js/controls/PointerLockControls.min.js"></script>
<script>
// =============== CONFIG ===============
const scene = new THREE.Scene();
scene.background = new THREE.Color(0x001100);
scene.fog = new THREE.FogExp2(0x001100, 0.06);

const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
const renderer = new THREE.WebGLRenderer({ antialias: false });
renderer.setSize(window.innerWidth, window.innerHeight);
renderer.setPixelRatio(0.8); // Low-res retro look
document.body.appendChild(renderer.domElement);

const controls = new THREE.PointerLockControls(camera, renderer.domElement);
scene.add(controls.getObject());

camera.position.set(0, 1.8, 0);

// Lighting
scene.add(new THREE.AmbientLight(0x222222, 0.8));
const redLight = new THREE.PointLight(0xff0040, 1.5, 30);
redLight.position.set(5, 5, -5);
scene.add(redLight);

// =============== INPUT ===============
const keys = {};
window.addEventListener('keydown', e => {
  keys[e.key.toLowerCase()] = true;
  if (e.key === 'Shift') togglePhone();
});
window.addEventListener('keyup', e => keys[e.key.toLowerCase()] = false);

// Lock pointer on click
renderer.domElement.addEventListener('click', () => controls.lock());

// =============== GAME STATE ===============
let shift = parseInt(localStorage.getItem('currentShift') || '1');
let timeLeft = 240;
let gameState = 'shift'; // shift / end-shift / driving / next-shift
let pistolEquipped = false;
let crouching = false;

const missions = [
  "", // 0
  "Get all the children into their corresponding Class room",
  "get all the children into their corresponding class room...",
  "children in classroom",
  "classroom",
  "children",
  "I see you...",
  "",
  "I know who you are...and i'm not afraid...",
  "aoidhfa;fhoapdifhvnaosd;pfui",
  "In a next life, i'll be waiting"
];

function updateMissionText() {
  document.getElementById('mission-text').innerHTML = `<strong>Night ${shift} Mission:</strong><br><br>${missions[shift]}`;
}
updateMission
