<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Office Game</title>
<style>
  body { margin: 0; background: black; overflow: hidden; }
  canvas { display: block; margin: auto; }
</style>
</head>
<body>

<canvas id="game" width="640" height="480"></canvas>

<script>
/* =======================
   SETUP
======================= */
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

const keys = {};
document.addEventListener("keydown", e => keys[e.key.toLowerCase()] = true);
document.addEventListener("keyup", e => keys[e.key.toLowerCase()] = false);

/* =======================
   LOAD IMAGES
======================= */
const images = {};
const load = src => {
  const img = new Image();
  img.src = src;
  return img;
};

images.office = load("office.png");
images.playerNormal = load("player_normal.png");
images.playerGun = load("player_gun.png");
images.playerAttack = load("player_attack.png");
images.npc = load("npc.png");
images.monster = load("monster.png");
images.giga = load("giga_monster.png");
images.caught = load("caught_screen.png");

/* =======================
   GAME STATE
======================= */
const GAME_PLAYING = 0;
const GAME_CAUGHT = 1;
let gameState = GAME_PLAYING;

/* =======================
   PLAYER
======================= */
const player = {
  x: 100,
  y: 100,
  w: 24,
  h: 24,
  speed: 2,
  hasGun: false,
  attacking: false,
  cooldown: 0
};

/* =======================
   WALL COLLISION (YELLOW/BROWN)
======================= */
function isWall(x, y) {
  if (x < 0 || y < 0 || x >= canvas.width || y >= canvas.height) return true;
  const data = ctx.getImageDat
